"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),r=e(t),n=require("@chakra-ui/react"),a=require("react-hook-form"),l=e(require("lodash.merge")),o=require("@chakra-ui/icons");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var i=t.createContext({}),c=function(e,r){var n=t.useContext(i);return t.useMemo((function(){return r?s({},n[e],r):n[e]}),[e,n,r])},u=function(e,r){var n=a.useFormContext().errors;return t.useMemo((function(){var t=n[e];if(t){var a=t.message;return a?a.replace(e,r||e):"Field validation failed"}}),[n,e,r])},m=function(e){var l=e.id,o=e.name,s=e.field,i=e.defaultValue,m=s.label,d=s.placeholder,b=s.htmlInputType,p=s.helperText,g=s.isRequired,f=s.leftInputAddon,E=s.rightInputAddon,h=s.shouldDisplay,O=s.styles,x=c("textField",void 0===O?{}:O),j=a.useFormContext(),F=j.register,v=j.watch,y=u(o,m),k=v(o);return t.useMemo((function(){return!h||h(k)}),[k,h])?r.createElement(n.FormControl,Object.assign({isRequired:g,isInvalid:!!y},x.control),!!m&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},x.label),m),f||E?r.createElement(n.InputGroup,Object.assign({},x.inputGroup),!!f&&r.createElement(n.InputLeftAddon,Object.assign({},f)),r.createElement(n.Input,Object.assign({"data-testid":l,type:b||"text",name:o,"aria-label":o,ref:F(),placeholder:d,defaultValue:i||""},x.input)),!!E&&r.createElement(n.InputRightAddon,Object.assign({},E))):r.createElement(n.Input,Object.assign({"data-testid":l,type:b||"text",name:o,"aria-label":o,ref:F(),placeholder:d,defaultValue:i||""},x.input)),!!p&&r.createElement(n.FormHelperText,Object.assign({},x.helperText),p),r.createElement(n.FormErrorMessage,Object.assign({},x.errorMessage),y)):null},d=function(e){var l=e.id,o=e.name,s=e.field,i=e.defaultValue,m=s.label,d=s.placeholder,b=s.helperText,p=s.isRequired,g=s.shouldDisplay,f=s.styles,E=c("textAreaField",void 0===f?{}:f),h=a.useFormContext(),O=h.register,x=h.watch,j=u(o,m),F=x(o);return t.useMemo((function(){return!g||g(F)}),[F,g])?r.createElement(n.FormControl,Object.assign({isRequired:p,isInvalid:!!j},E.control),!!m&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},E.label),m),r.createElement(n.Textarea,Object.assign({"data-testid":l,name:o,placeholder:d,ref:O(),defaultValue:i||""},E.input)),!!b&&r.createElement(n.FormHelperText,Object.assign({},E.helperText),b),r.createElement(n.FormErrorMessage,Object.assign({},E.errorMessage),j)):null},b=function(e){var l=e.id,o=e.name,s=e.field,i=e.defaultValue,m=s.label,d=s.placeholder,b=s.helperText,p=s.isRequired,g=s.shouldDisplay,f=s.styles,E=c("numberField",void 0===f?{}:f),h=a.useFormContext(),O=h.control,x=(0,h.watch)(o),j=u(o,m);return t.useMemo((function(){return!g||g(x)}),[x,g])?r.createElement(n.FormControl,Object.assign({key:o+"-control",isRequired:p,isInvalid:!!j},E.control),!!m&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},E.errorMessage),m),r.createElement(a.Controller,{name:o,control:O,defaultValue:i||0,as:r.createElement(n.NumberInput,null,r.createElement(n.NumberInputField,Object.assign({id:l,"data-testid":l,placeholder:d},E.input)),r.createElement(n.NumberInputStepper,null,r.createElement(n.NumberIncrementStepper,null),r.createElement(n.NumberDecrementStepper,null)))}),!!b&&r.createElement(n.FormHelperText,Object.assign({},E.helperText),b),r.createElement(n.FormErrorMessage,Object.assign({},E.errorMessage),j)):null},p=function(e){var l=e.id,o=e.name,s=e.field,i=s.label,m=s.helperText,d=s.isRequired,b=s.shouldDisplay,p=s.styles,g=void 0===p?{}:p,f=a.useFormContext(),E=f.register,h=(0,f.watch)(o),O=c("switchField",g),x=u(o,i);return t.useMemo((function(){return!b||b(h)}),[h,b])?r.createElement(n.FormControl,Object.assign({key:o+"-control",isRequired:d,isInvalid:!!x},O.control),!!i&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},O.label),i),r.createElement(n.Switch,Object.assign({name:o,"data-testid":l,ref:E},O.switch)),!!m&&r.createElement(n.FormHelperText,Object.assign({},O.helperText),m),r.createElement(n.FormErrorMessage,Object.assign({},O.errorMessage),x)):null},g=function(e){var l=e.id,o=e.name,s=e.field,i=s.label,m=s.helperText,d=s.isRequired,b=s.shouldDisplay,p=s.styles,g=void 0===p?{}:p,f=a.useFormContext(),E=f.register,h=(0,f.watch)(o),O=c("checkboxField",g),x=u(o,i);return t.useMemo((function(){return!b||b(h)}),[h,b])?r.createElement(n.FormControl,Object.assign({key:o+"-control",isRequired:d,isInvalid:!!x},O.control),!!i&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},O.label),i),r.createElement(n.Stack,Object.assign({},O.checkboxGroup),s.checkboxes.map((function(e){return r.createElement(n.Checkbox,{key:e.name,name:e.name,ref:E,"data-testid":l+"-"+e.name},e.label||e.name)}))),!!m&&r.createElement(n.FormHelperText,Object.assign({},O.helperText),m),r.createElement(n.FormErrorMessage,Object.assign({},O.errorMessage),x)):null},f=function(e){var l=e.id,o=e.name,s=e.field,i=e.defaultValue,m=s.label,d=s.helperText,b=s.isRequired,p=s.shouldDisplay,g=s.styles,f=void 0===g?{}:g,E=a.useFormContext(),h=E.register,O=(0,E.watch)(o),x=c("selectField",f),j=u(o,m);return t.useMemo((function(){return!p||p(O)}),[O,p])?r.createElement(n.FormControl,Object.assign({key:o+"-control",isRequired:b,isInvalid:!!j},x.control),!!m&&r.createElement(n.FormLabel,Object.assign({htmlFor:o},x.label),m),r.createElement(n.Select,Object.assign({name:o,"data-testid":l,ref:h(),defaultValue:i||s.options[0].value},x.select),s.options.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))),!!d&&r.createElement(n.FormHelperText,Object.assign({},x.helperText),d),r.createElement(n.FormErrorMessage,Object.assign({},x.errorMessage),j)):null},E=function(e,t,a){var l=e[0],o=e[1],s=null;switch(o.type){case"text":s=m;break;case"textArea":s=d;break;case"number":s=b;break;case"array":s=h;break;case"object":s=O;break;case"switch":s=p;break;case"checkbox":s=g;break;case"select":s=f;break;case"custom":return r.createElement(n.Box,null,r.createElement(s=o.component,Object.assign({id:t,"data-testid":t,name:l,field:o,defaultValue:a},o.props)))}return r.createElement(n.Box,null,r.createElement(s,{id:t,"data-testid":t,name:l,field:o,defaultValue:a}))},h=function(e){var l=e.name,s=e.field,i=s.label,m=s.isRequired,d=s.isCollapsable,b=s.itemField,p=s.helperText,g=s.shouldDisplay,f=s.styles,h=void 0===f?{}:f,O=a.useFormContext(),x=O.control,j=(0,O.watch)(l),F=a.useFieldArray({name:l,control:x}),v=F.fields,y=F.append,k=F.remove,C=n.useDisclosure({defaultIsOpen:!0}),I=C.isOpen,T=C.onOpen,B=C.onToggle,M=c("arrayField",h),w=u(l,i);return t.useMemo((function(){return!g||g(j)}),[j,g])?r.createElement(n.FormControl,Object.assign({isRequired:m,isInvalid:!!w},M.control),r.createElement(n.Flex,Object.assign({},M.toolbar),!!i&&r.createElement(n.FormLabel,Object.assign({htmlFor:l},M.label),i," ",r.createElement(n.Box,Object.assign({},M.countText),"(",v.length,")")),r.createElement(n.ButtonGroup,Object.assign({},M.buttonGroup),r.createElement(n.IconButton,Object.assign({icon:r.createElement(o.AddIcon,null),"aria-label":"Add item",onClick:function(){y({}),T()}},M.addButton)),r.createElement(n.IconButton,Object.assign({icon:r.createElement(o.DeleteIcon,null),"aria-label":"Clear items",onClick:function(){return k()}},M.clearButton)),d&&r.createElement(n.IconButton,Object.assign({as:I?o.ViewOffIcon:o.ViewIcon,"aria-label":I?"Hide items":"Show items",onClick:B},M.collapseButton)))),r.createElement(n.Collapse,{isOpen:I},r.createElement(n.Stack,Object.assign({},M.arrayContainer),v.map((function(e,t){return r.createElement(n.Box,Object.assign({key:(null==e?void 0:e.id)||l+"["+t+"].value"},M.itemContainer),E([l+"["+t+"].value",b],e.id,e.value),r.createElement(n.Box,Object.assign({},M.deleteItemContainer),r.createElement(n.IconButton,Object.assign({icon:r.createElement(o.DeleteIcon,null),"aria-label":"Delete item",onClick:function(){return k(t)}},M.deleteButton))))})))),!!p&&r.createElement(n.FormHelperText,Object.assign({},M.helperText),p),r.createElement(n.FormErrorMessage,Object.assign({},M.errorMessage),w)):null},O=function(e){var l=e.name,s=e.field,i=e.id,m=e.defaultValue,d=s.label,b=s.isCollapsable,p=s.isRequired,g=s.helperText,f=s.shouldDisplay,h=s.styles,O=void 0===h?{}:h,x=(0,a.useFormContext().watch)(l),j=n.useDisclosure({defaultIsOpen:!0}),F=j.isOpen,v=j.onToggle,y=c("objectField",O),k=u(l,s.label);return t.useMemo((function(){return!f||f(x)}),[x,f])?r.createElement(n.FormControl,Object.assign({isRequired:!!p,isInvalid:!!k},y.control),r.createElement(n.Flex,Object.assign({},y.toolbar),!!d&&r.createElement(n.FormLabel,Object.assign({htmlFor:l},y.label),d),b&&r.createElement(n.IconButton,Object.assign({as:F?o.ViewOffIcon:o.ViewIcon,"aria-label":F?"Hide items":"Show items",onClick:v},y.collapseButton))),r.createElement(n.Collapse,{isOpen:F},r.createElement(n.Stack,Object.assign({},y.objectContainer),Object.entries(s.properties).map((function(e,t){var a=e[0],o=e[1];return r.createElement(n.Box,Object.assign({key:t},y.propertyContainer),E([l+"."+a,o],i,null==m?void 0:m[a]))})))),!!g&&r.createElement(n.FormHelperText,Object.assign({},y.helperText),g),r.createElement(n.FormErrorMessage,Object.assign({},y.errorMessage),k)):null},x={form:{container:{padding:4},title:{size:"lg",marginBottom:4},fieldSpacing:6,buttonGroup:{marginTop:4},submitButton:{size:"sm"},resetButton:{size:"sm"}},arrayField:{arrayContainer:{spacing:4,marginTop:2},label:{padding:0,display:"flex"},countText:{fontWeight:400,marginLeft:1},toolbar:{alignItems:"center"},buttonGroup:{marginLeft:"auto"},addButton:{size:"xs"},deleteButton:{size:"xs",margin:"auto"},clearButton:{size:"xs"},collapseButton:{size:"xs"},itemContainer:{display:"grid",gridTemplateColumns:"1fr 2.5rem",paddingLeft:2,paddingBottom:2,paddingTop:1,border:"1px solid",borderRadius:4,borderColor:"gray.200",backgroundColor:"gray.50"},deleteItemContainer:{display:"flex"}},objectField:{objectContainer:{spacing:4,borderWidth:1,borderColor:"gray.200",padding:2,borderRadius:4,marginTop:2,backgroundColor:"gray.50"},label:{padding:0},toolbar:{alignItems:"center"},collapseButton:{size:"xs",marginLeft:"auto"}},checkboxField:{checkboxGroup:{isInline:!0,spacing:4}}},j=function(e){var t=e[0],a=e[1],l=null;switch(a.type){case"text":l=m;break;case"textArea":l=d;break;case"number":l=b;break;case"array":l=h;break;case"object":l=O;break;case"switch":l=p;break;case"checkbox":l=g;break;case"select":l=f;break;case"custom":return r.createElement(n.Box,{key:t+"-container"},r.createElement(l=a.component,Object.assign({name:t,field:a},a.props)))}return r.createElement(n.Box,{key:t+"-container"},r.createElement(l,{name:t,field:a}))};exports.Form=function(e){var o,s,c,u,m,d,b,p,g,f=e.title,E=e.schema,h=e.handleSubmit,O=e.overwriteDefaultStyles,F=e.buttons,v=e.styles,y=void 0===v?{}:v,k=a.useForm(e.formOptions),C=t.useMemo((function(){return O?y:l(x,y)}),[y,O]);return r.createElement(i.Provider,{value:C},r.createElement(a.FormProvider,Object.assign({},k),r.createElement(n.Box,Object.assign({as:"form",onSubmit:k.handleSubmit(h)},null==(o=C.form)?void 0:o.container),!!f&&r.createElement(n.Heading,Object.assign({},null==(s=C.form)?void 0:s.title),f),r.createElement(n.Stack,{spacing:null==(c=C.form)?void 0:c.fieldSpacing},Object.entries(E).map(j)),r.createElement(n.ButtonGroup,Object.assign({},null==(u=C.form)?void 0:u.buttonGroup),null!=F&&null!=(m=F.reset)&&m.hidden?null:r.createElement(n.Button,Object.assign({type:"reset"},null==(d=C.form)?void 0:d.resetButton),(null==F||null==(b=F.reset)?void 0:b.text)||"Reset"),r.createElement(n.Button,Object.assign({type:"submit"},null==(p=C.form)?void 0:p.submitButton),(null==F||null==(g=F.submit)?void 0:g.text)||"Submit")))))},exports.useErrorMessage=u,exports.useStyles=c;
//# sourceMappingURL=react-hook-form-generator.cjs.production.min.js.map
